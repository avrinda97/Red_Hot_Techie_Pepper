2010-03-04T12:07:00.000Z	Mage_Dude		If I know the USB bus number can I 'suspend' a particular root hub and remove the power to it?
2010-03-04T12:08:00.000Z	brjann	Mage_Dude	root hubs should power themselves down if they're not in use
2010-03-04T12:09:00.000Z	Mage_Dude	brjann	I want to power it off regardless. I'm just 'playing' with a USB fan and want to be able to turn it on and off without using the switch.
2010-03-04T12:10:00.000Z	brjann	Mage_Dude	ah, i gotcha. take a look in the /sys/bus/usb/devices/*/power/ directories, where * is the USB ID in question
2010-03-04T12:11:00.000Z	Mage_Dude	brjann	Cool, Pretty sure it's 4-1
2010-03-04T12:13:00.000Z	brjann	Mage_Dude	then look in /sys/bus/usb/devices/4-0:1.0/power/ . inside that directory should be a couple of sysfs "files," which are actually filesystem links to driver inputs and outputs
2010-03-04T12:14:00.000Z	Mage_Dude	brjann	Lots' of cool stuff... level, wakeup, persist... power/level seems likely?
2010-03-04T12:16:00.000Z	brjann	Mage_Dude	i'm seeing at least one report that    sudo sh -c "echo 0 > /sys/bus/usb/devices/<whatever>/power/state" will power down the device
2010-03-04T12:17:00.000Z	brjann	Mage_Dude	but it may also set it on fire, so user beware :)
2010-03-04T12:18:00.000Z	Mage_Dude	brjann	It is /power/state? Or power/level? I dont' have a /state file in the directory?
2010-03-04T12:18:00.000Z	brjann	Mage_Dude	oh, this thread said state. maybe it's changed. just a moment
2010-03-04T12:19:00.000Z	Mage_Dude	brjann	And where did you see the report? Just curious where you're getting all the good info ;)
2010-03-04T12:19:00.000Z	brjann	Mage_Dude	eh, it's not great info, as the people in the thread recommended using a sudo command that would never work :) but the idea's there: http://www.linuxquestions.org/questions/debian-26/power-off-usb-509328/
2010-03-04T12:22:00.000Z	brjann	Mage_Dude	ah, here you go. straight from the kernel docs themselves: http://www.mjmwired.net/kernel/Documentation/usb/power-management.txt#104
2010-03-04T12:24:00.000Z	brjann	Mage_Dude	looks like you can write "suspend" to power/level to shut it down, and "on" or "auto" to turn it back on. but "suspend" will stop working after kernel 2.6.32 apparently.
2010-03-04T12:25:00.000Z	Mage_Dude	brjann	Yeah, I'm not sure what kernel it's running, but if it's not going to work after a few more updates I guess no biggie. Just for fun anyway
2010-03-04T12:30:00.000Z	Mage_Dude	brjann	Well, I can't quite figure out the correct command to overwrite the level file. Tried a few combinations of What you suggested plus what I read in the threads
2010-03-04T12:31:00.000Z	brjann	Mage_Dude	the threads were wrong.    sudo sh -c "echo suspend > /sys/bus/usb/devices/.../power/level"    should work...
2010-03-04T12:33:00.000Z	Mage_Dude	brjann	Hmmm, it does change the contents, but the device is still on...
2010-03-04T12:33:00.000Z	brjann	Mage_Dude	well, it's possible that interface simply asks devices to do their own power management, which a dumb device like a fan wouldn't do
2010-03-04T12:34:00.000Z	Mage_Dude	brjann	Well, ti was worth a try. Thanks for teaching me something cool :)
2010-03-04T12:34:00.000Z	brjann	Mage_Dude	no problem :)
