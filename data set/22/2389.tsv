2010-05-21T04:11:00.000Z	Jordan_U	bytenik	sudo apt-get install grub-pc. grub2 is smarter when it comes to drive numbers / order changing.
2010-05-21T04:12:00.000Z	Jordan_U	bytenik	The BIOS exposes all disks the same way, there is no way in the bootloader to differentiate between internal and USB drives.
2010-05-21T04:12:00.000Z	bytenik	Jordan_U	So if I disable USB boot, that'll do it?
2010-05-21T04:12:00.000Z	bytenik	Jordan_U	(in the bios)
2010-05-21T04:13:00.000Z	Jordan_U	bytenik	Likely, yes.
2010-05-21T04:13:00.000Z	bytenik	Jordan_U	That might just be the easiest way... let me give it a shot and I'll let you know.
2010-05-21T04:16:00.000Z	bytenik	Jordan_U	No go... but I also boot to SUSE and I don't believe it supports grub2 yet
2010-05-21T04:16:00.000Z	Jordan_U	bytenik	If you install grub2 in Ubuntu it will automatically detect and add entries for SUSE
2010-05-21T04:19:00.000Z	Jordan_U	bytenik	Why would you think that? grub needs to be able to read files from the filesystem, so it needs to find that filesystem first.
2010-05-21T04:19:00.000Z	bytenik	Jordan_U	Wait, location of the system with grub installed on it is hard-coded into the MBR?
2010-05-21T04:20:00.000Z	Jordan_U	bytenik	Also, make sure the problem isn't as simple as there being a broken grub installation on the USB drive (and the USB drive is first in the boot order causing that broken install to be used)
2010-05-21T04:20:00.000Z	Jordan_U	bytenik	In grub legacy, yes. grub2 uses UUIDs.
2010-05-21T04:20:00.000Z	bytenik	Jordan_U	The device in question is a cellular modem with drivers on ROM-based USB mass-storage. So it shouldn't be bootable anyway, but even if it is I have no control over the content.
2010-05-21T04:44:00.000Z	Jordan_U	bytenik	It does, if /boot is on the same drive as the mbr grub is installed to (but unfotunatly the drive number supplied by the BIOS is sometimes wrong with buggy BIOSs)
2010-05-21T04:45:00.000Z	bytenik	Jordan_U	Lets assume for a second my bios isn't buggy (*crosses fingers* :)... how would I tell GRUB to just look in partition X on the drive its invoked from?
2010-05-21T04:46:00.000Z	Jordan_U	bytenik	I don't know with grub legacy. Is there a reason you don't want to upgrade to grub2? It's the default in Ubuntu and upgrading is easy.
2010-05-21T04:46:00.000Z	bytenik	Jordan_U	Yea, this system is a dual boot with Ubuntu just for testing but the rest of the systems are just SUSE, which doesn't have package support for grub2.
2010-05-21T04:47:00.000Z	bytenik	Jordan_U	I'm trying to avoid having to hack together solutions for this particular project. Otherwise I'd still be on Ubuntu for the entire deployment, but sadly it lacks mono-2.6 package support.
2010-05-21T04:47:00.000Z	Jordan_U	bytenik	Since you're using grub from SUSE you should probably ask in #suse
2010-05-21T04:47:00.000Z	bytenik	Jordan_U	They're all dead over there. :P
2010-05-21T04:48:00.000Z	bytenik	Jordan_U	I do get your point, though I do want to try to get a general enough solution for any distribution.
2010-05-21T04:53:00.000Z	Jordan_U	bytenik	The problem is that there aren't many people who know the internals of grub legacy very well since it no longer has any upstream, and it doesn't give very helpfull error messages most of the time (when grub2 is not able to find /boot you still have a rescue shell and can list drives / turn on debug output). If you really need to be able to boot with this USB drive in maybe you could boot with super grub2 disk.
