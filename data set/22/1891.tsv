2009-12-08T04:08:00.000Z	youngman		Hi, I have a 2-device software RAID1 array built with mdadm (/dev/sda2, /dev/sdb2, both devices work).    The /dev/sda disk has localised errors.   I have a replacement disk (/dev/sdc) and want to replace the faulty disk.   What's the best way to do this?    How do I know when the process is complete?
2009-12-08T04:09:00.000Z	DasEi	youngman	same model/size ?
2009-12-08T04:11:00.000Z	youngman	DasEi	yes
2009-12-08T04:11:00.000Z	youngman	DasEi	different model, same exact size, same exact partition size.
2009-12-08T04:11:00.000Z	DasEi	youngman	have got a live cd ?
2009-12-08T04:11:00.000Z	youngman	DasEi	I doubt I'd need one.
2009-12-08T04:13:00.000Z	DasEi	youngman	hm, I though of an identical copy via dd, different model.. I'm not sure about blkids on raid atm
2009-12-08T04:18:00.000Z	DasEi	youngman	was it a raid 1 setup ?
2009-12-08T04:22:00.000Z	DasEi	youngman	was it a raid 1 setup ?
2009-12-08T04:23:00.000Z	youngman	DasEi	yes - and still is
2009-12-08T04:23:00.000Z	DasEi	youngman	http://tinyurl.com/2eennm
2009-12-08T04:26:00.000Z	youngman	DasEi	Hmm.   Thanks.   I was hoping to find a way that was more resilient to possible physical errors on the other disk.
2009-12-08T04:26:00.000Z	youngman	DasEi	As things are, the unfailed disk becomes a SPOF.
2009-12-08T04:27:00.000Z	youngman	DasEi	I'll just do it in the opposite order.
2009-12-08T04:27:00.000Z	DasEi	youngman	you can try a 1:1 hardclone with dd, which is much simpler, but I'm not sure about uuids on different models
2009-12-08T04:28:00.000Z	youngman	DasEi	I don't think that is a good idea.
2009-12-08T04:30:00.000Z	DasEi	youngman	which sizes are the disks ?
2009-12-08T04:31:00.000Z	youngman	DasEi	the physical disks are 1T.   The RAID1 partition is about 600G.
2009-12-08T04:31:00.000Z	DasEi	youngman	alright, so time is a factor not just trying dd, i c
2009-12-08T04:32:00.000Z	DasEi	youngman	maybe check your fstab to get a plan, sudo blkid shows the uuids of all connected disks
2009-12-08T05:13:00.000Z	youngman	DasEi	so I did it the other way around, leaving the failed disk in the array when adding in the new disk.    MD didn't start copying data onto the new one (which was added as a spare) until I explicitly marked the failing disk as failed.   Then the failed disk is ignored.
2009-12-08T05:14:00.000Z	youngman	DasEi	so unless the new replacement disk fails there is no difference between the two approaches (i.e. the unfailed disk from the original array is indeed a SPOF during reconstruction).
