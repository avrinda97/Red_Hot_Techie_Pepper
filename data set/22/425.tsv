2011-10-18T11:21:00.000Z	SunTsu		I'll try it again, maybe now somebody has an idea to debug this: I use crypted lvm, with rootfs being /dev/mapper/system-root, which worked flawlessly on Maverick. I updated to oneiric 2 days ago, now cryptroot tries to mount /dev/mapper/system as rootfs, although kernel parameters are correct
2011-10-18T11:22:00.000Z	SunTsu		I always end up in initramfs, mount rootfs myself, ln -s system-root to system and can continue bootup, still I'd like my box to boot all by itself
2011-10-18T11:23:00.000Z	yagoo	SunTsu	probably u should use UUID
2011-10-18T11:24:00.000Z	SunTsu	yagoo	yeah, maybe, I'll give it a try. Still I wonder how cryptroot came to the idea to mount /dev/mapper/system
2011-10-18T11:24:00.000Z	SunTsu	yagoo	looks like a bug to me
2011-10-18T11:24:00.000Z	yagoo	SunTsu	u using lvm ?
2011-10-18T11:25:00.000Z	SunTsu	yagoo	yeah, luks crypted
2011-10-18T11:26:00.000Z	yagoo	SunTsu	i'm not entirely familiar with lvm.. u may need to specify a mapper lvm parameter to the kern bootline
2011-10-18T11:27:00.000Z	SunTsu	yagoo	I set root=/dev/mapper/system-root - which exists at that point
2011-10-18T12:08:00.000Z	SunTsu	yagoo	didn't change anything. Changed fstab and grub.cfg to uuid for my rootfs, still that *beep* cryptroot script in initramfs tries to mount /dev/mapper/system
2011-10-18T12:09:00.000Z	yagoo	SunTsu	i said about LVM..
2011-10-18T12:09:00.000Z	yagoo	SunTsu	i told you i'm not an expert with lvm.. but very much believe anything with /dev/mapper or something like this refers to lvm
2011-10-18T12:11:00.000Z	SunTsu	yagoo	it does. This worked with MAverick, just the way it is now. And to add some more confusion, I set up a system like mine in vbox and it works quite well
2011-10-18T12:12:00.000Z	yagoo	SunTsu	why not fix it? use the rescue ubuntu and see if there is a "system" label rather than "system-root"
2011-10-18T12:12:00.000Z	yagoo	SunTsu	you'll have to use the lvm commands in rescue..
2011-10-18T12:14:00.000Z	yagoo	SunTsu	i don't know if this is the whole story.. but it may give some hints http://www.ubuntugeek.com/rescue-an-encrypted-luks-lvm-volume.html
2011-10-18T12:14:00.000Z	SunTsu	yagoo	system is the volume group. I don't have any lvm volume having the same name, that wouldn't even work. And how could there be a system volume out of a sudden which wasn't there before the upgrade?
2011-10-18T12:16:00.000Z	yagoo	SunTsu	did u use vgscan ?
2011-10-18T12:17:00.000Z	SunTsu	yagoo	I did. I'm running that box right now. My lvm looks ok, everything is running as expected. It's just that cryptroot script that seems to have gone insane
2011-10-18T12:17:00.000Z	yagoo	SunTsu	btw there's an lvm channel
2011-10-18T12:18:00.000Z	yagoo	SunTsu	if u can mount those partitions manually.. then u know u should be able to boot later at 1 way or another
2011-10-18T12:19:00.000Z	SunTsu	yagoo	I am able to boot. I need to use initramfs, make a symlink there, mount root manually and then I'm able to continue - it's a problem with ubuntu's cryptroot script inside the initramfs it seems. The lvm itself is well
