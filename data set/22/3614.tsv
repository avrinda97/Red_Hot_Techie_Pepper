2008-07-22T02:09:00.000Z	netzwurm		hey, how can I patch and build the ubuntu-server kernel? if i do aptitute install linux-source-2.6.24 and then copy the config from /boot/config-2.6.24-19-server to .config, the whole thing isn't built because it lacks the xen patch that's apparently in the server image. where do i find the patches that i need to apply to build the whole thing (with my patches applied?)
2008-07-22T02:10:00.000Z	netzwurm		?
2008-07-22T02:12:00.000Z	macd	netzwurm	grab the headers for the server/xen kernel as well
2008-07-22T02:14:00.000Z	netzwurm	macd	and then just copy them into the source-dir?
2008-07-22T02:14:00.000Z	macd	netzwurm	yes, also you should refer to "the master kernel thread" on ubuntu forums for building your kernel the ubuntu way.
2008-07-22T02:15:00.000Z	netzwurm	macd	i take it that is different from the debian way?
2008-07-22T02:15:00.000Z	macd	netzwurm	no its pretty darn close
2008-07-22T02:15:00.000Z	netzwurm	macd	ok. well. then i feel prepared :)
2008-07-22T02:15:00.000Z	macd	netzwurm	so youll be fine the debian way
2008-07-22T02:19:00.000Z	netzwurm	macd	hm. i am confused. the build with the server config fails because there is no directory arch/xen in the sourcedir. however, that directory also doesn't exist in the headers and headers-server dirs and the headers-server package doesn't depend on any other header packages.
2008-07-22T02:19:00.000Z	macd	netzwurm	headers for xen
2008-07-22T02:20:00.000Z	netzwurm	macd	shouldnt headers-server consequently depend on headers-xen?
2008-07-22T02:20:00.000Z	macd	netzwurm	I didnt make the package
2008-07-22T02:20:00.000Z	netzwurm	macd	so that's a bug.
2008-07-22T02:21:00.000Z	macd	netzwurm	I dont think so, running the server kernel, without xen patches sounds like a perfect use case for a non virt server.
2008-07-22T02:21:00.000Z	macd	netzwurm	anyways, linux-headers-2.6.24-19-xen is what you want
2008-07-22T02:22:00.000Z	macd	netzwurm	and linux-headers-lum-2.6.24-19-xen
2008-07-22T02:22:00.000Z	macd	netzwurm	you may also need libxen3-dev
2008-07-22T02:22:00.000Z	netzwurm	macd	well. my point is that the linux-source-2.6.24 doesn't build with the config from the server package if arch/xen/Makefile doesn't exist (and that is also not included in the headers for xen)
2008-07-22T02:23:00.000Z	netzwurm	macd	i would be more than happy to build without xen, i don't need any xen
2008-07-22T02:23:00.000Z	macd	netzwurm	interesting, you should follow up in #ubuntu-kernel
2008-07-22T02:24:00.000Z	netzwurm	macd	thanks.
