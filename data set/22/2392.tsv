2009-06-25T04:07:00.000Z	nighto		Hi there
2009-06-25T04:08:00.000Z	nighto		Need some help in cloning a working Ubuntu Server machine to a few others
2009-06-25T04:08:00.000Z	nighto		I cloned the partitions with ddrescue, the other machine boots ok but eth0 won't come up. The machine's hardware is the same in all machines.
2009-06-25T04:08:00.000Z	nighto		Any tips? Thanks in advance
2009-06-25T04:09:00.000Z	nbkr	nighto	Anything in the logs?
2009-06-25T04:10:00.000Z	nighto	nbkr	everything loads but mysql, which fails because I don't have an ethernet interface. When I try to /etc/init.d/networking restart, I got a few errors like eth0: ERROR while getting interface flags: No such device
2009-06-25T04:11:00.000Z	nighto	nbkr	the strange thing is that the machine's hardware is exactly the same. The only thing I can imagine they differ is the NIC's MAC address.
2009-06-25T04:13:00.000Z	nbkr	nighto	Does lspci show the NIC as identical? Maybe its a different chipset.
2009-06-25T04:15:00.000Z	nighto	nbkr	Yes, they are exactly the same, it's an onboard NIC with exactly the same motherboard. Even the revision of the model (it's 10x AsRock N61P-S Rev. G/A1.06). lspci shows it as 00:07.0 Bridge: nVidia Corporation MCP61 Ethernet (rev a2).
2009-06-25T04:16:00.000Z	nighto	nbkr	maybe if the script that fires up the networking has some bind with the MAC address of the first NIC, don't know.
2009-06-25T04:17:00.000Z	nbkr	nighto	Well you could change the MAC Adress of the interface on the second machine to see if its helping.
2009-06-25T04:18:00.000Z	nighto	nbkr	how? i can't even see the NIC in ifconfig. when /etc/init.d/networking is loading, it fails.
2009-06-25T04:18:00.000Z	nbkr	nighto	Hm, ok - have to checked the output of "lsmod" maybe the driver doesn't get loaded.
2009-06-25T04:20:00.000Z	nighto	nbkr	with lspci -vv | less it says: "Kernel driver in use: forcedeth/Kernel modules: forcedeth"
2009-06-25T04:20:00.000Z	nighto	nbkr	lsmod | grep forcedeth says "forcedeth    61968 0"
2009-06-25T04:21:00.000Z	nbkr	nighto	Sorry, don't have a clue what it could be then.
2009-06-25T04:22:00.000Z	nbkr	nighto	Maybe you could check with the ubuntu live cd if the card is really working or if it is broken.
2009-06-25T04:22:00.000Z	nighto	nbkr	Well, thanks. I tried to modprobe -r forcedeth ; modprobe forcedeth and apparently it loaded up as eth1
2009-06-25T04:23:00.000Z	nighto	nbkr	Do you know where can I check the bindings of MAC Address -> ethN?
2009-06-25T04:24:00.000Z	nbkr	nighto	Thats probably in /etc/udev/rules.d/
2009-06-25T04:29:00.000Z	nighto	nbkr	Apparently I could sort it out. By some reason, the cloned NIC's is on eth1, not eth0. So I changed the /etc/network/interfaces and it worked. Why it's being detected as eth1 and not eth0 remains as a mystery...
2009-06-25T04:29:00.000Z	nighto	nbkr	But thanks anyway.
