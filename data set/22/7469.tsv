2007-05-23T07:26:00.000Z	Frogzoo_		anyone have a rule for iptables that will permit pppoe negotiation ?
2007-05-23T07:28:00.000Z	DBO	Frogzoo_	call me crazy... but PPPoE is layer 2... iptables is layer 3...
2007-05-23T07:28:00.000Z	Frogzoo_	DBO	it's true, but if I enable my iptables ruleset, pppoe won't connect...
2007-05-23T07:30:00.000Z	Frogzoo_	DBO	nothing fancy http://paste.ubuntu-nl.org/22150/
2007-05-23T07:31:00.000Z	DBO	Frogzoo_	as much as I hate to admit this, I would prefer to see the script you are running =)
2007-05-23T07:35:00.000Z	Frogzoo_	DBO	you'll see the section from the interfaces file, I just ifup ib0 to bring the connection up: http://paste.ubuntu-nl.org/22151/
2007-05-23T07:36:00.000Z	DBO	Frogzoo_	well this is just a guess here, but you are dropping new ppp packets in that config
2007-05-23T07:36:00.000Z	DBO	Frogzoo_	so if the connection is not already established... it wont be able to
2007-05-23T07:37:00.000Z	Frogzoo_	DBO	aye, that's most certainly it, but how to get them to pass is the $50 question?
2007-05-23T07:37:00.000Z	DBO	Frogzoo_	which is why I wanted the script you are using to give it that rule...
2007-05-23T07:39:00.000Z	Frogzoo_	DBO	ah, iptables -A INPUT -i ppp+ ! --state ESTABLISHED,RELATED -j DROP
2007-05-23T07:39:00.000Z	DBO	Frogzoo_	bingo... change that to also say NEW
2007-05-23T07:40:00.000Z	Frogzoo_	DBO	mmm don't want to :p
2007-05-23T07:40:00.000Z	DBO	Frogzoo_	you just want to punch a quick hole in it or something? =P
2007-05-23T07:41:00.000Z	Frogzoo_	DBO	doesn't seem to have the granularity I need
2007-05-23T07:41:00.000Z	DBO	Frogzoo_	set it to only accept from your provider?
2007-05-23T07:42:00.000Z	Frogzoo_	DBO	but how? there's no IP to speak of, and the mac is no use - what I think I want is a module that will pass pppoe only frames
2007-05-23T07:43:00.000Z	DBO	Frogzoo_	its always a competition with you =P
2007-05-23T07:44:00.000Z	DBO	Frogzoo_	I can see your point, I cant figure out why you want to do it though...
2007-05-23T07:44:00.000Z	Frogzoo_	DBO	oh, I want to be able to have the rules in place prior to bringing up the pppoe link, so there's not that window of opportunity
2007-05-23T07:49:00.000Z	Frogzoo_	DBO	well atm, the pppoe only comes up without any rules in place, and that's a pretty poor solution for a firewall
2007-05-23T07:54:00.000Z	Frogzoo_	DBO	yeah, I guess that's the best option
