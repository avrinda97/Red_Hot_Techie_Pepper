2009-07-21T14:08:00.000Z	G_A_C	timfrost	you're right, I've used the export function to make the OpenSSH format public/private key, this is what I've copied to my Ubuntu box
2009-07-21T14:10:00.000Z	G_A_C	timfrost	I've also copied the same OpenSSH pub/priv keys to a remote FreeBSD box and set them up with ssh-agent, this FreeBSD box can connect to a remote Linux box without requiring a password, my Ubuntu laptop here can't connect to the same remote Linux box, even though it has the same OpenSSH format keyfiles...I'm quite confused, I think I might give it a try the other way round (creating keys on Linux and try to import them with puttyge
2009-07-21T14:16:00.000Z	timfrost	G_A_C	Is there a specific host name associated with the keys, when set up in .ssh/authorized_keys on the remote box?  What does ssh -v report when attempting to connect from the laptop?
2009-07-21T14:19:00.000Z	G_A_C	timfrost	there are no hostnames associated with the keys as far as I'm aware, just a standard puttygen RSA key, 3072 bit length, with a passphrase and a comment. give me two seconds and I'll pastebin the ssh -v output from the working FreeBSD box and the non-working Ubuntu laptop...
2009-07-21T14:24:00.000Z	G_A_C	timfrost	working - http://pastebin.com/d1af96c87 nonworking - http://pastebin.com/d21d84506
2009-07-21T14:27:00.000Z	timfrost	G_A_C	both say that the key is accepted (Server accepts key: pkalg ssh-rsa blen 404), so the key isn't the problem, but there is something else wrong.  What other files exist in the remote .ssh directory?
2009-07-21T14:29:00.000Z	G_A_C	timfrost	on the remote_linux machine I'm SSHing to, there's just an authorized_keys file (containing the new public key and nothing else) and a known_hosts file. The remote Linux box has no SSH keys of its own stored on it
2009-07-21T14:33:00.000Z	timfrost	G_A_C	known_hosts is used by the client.  This sort of problem is usually caused by a directory that is group/world-writable, in the path to the user's .ssh directory.  Since different clients behave differently, check the permissions on the parent directories of ~/.ssh on the laptop.
2009-07-21T14:34:00.000Z	G_A_C	timfrost	/home is 755, /home/gavin is 700, /home/gavin/.ssh is 700 and /home/gavin/.ssh/* are all 600
2009-07-21T14:39:00.000Z	timfrost	G_A_C	Those permissions look good - I assume that / is 555 or 755, and owned by root.  Check the logs on both end for the failure, and see if either side logs a message that may help.
2009-07-21T14:40:00.000Z	G_A_C	timfrost	as far as I can tell (ls -al / and check the . entry?) / is 755 and owned by root
2009-07-21T14:42:00.000Z	timfrost	G_A_C	that figures.  'ls -ld /' on my system gives 'drwxr-xr-x 23 root root 4096 2009-06-16 20:22 /'.  So logs (auth.log and daemon.log) are your best clue
2009-07-21T14:42:00.000Z	G_A_C	timfrost	I just checked /var/log/auth.log on the remote server and there's an "RSA_public_decrypt failed" error when I try and connect from the laptop which isn't there when I connect from freebsd
2009-07-21T14:46:00.000Z	timfrost	G_A_C	I wonder if the 3k key length is a problem for Ubuntu.  I also note that the two systems used/received different server keys (BSD reported "Host 'remote_linux' is known and matches the DSA host key" but the linux laptop reported "Host 'remote_linux' is known and matches the RSA host key."
2009-07-21T14:47:00.000Z	G_A_C	timfrost	my previous key was 8k so I don't think 3k is too big...do you think maybe it's a problem because of the non-standard length?
2009-07-21T14:50:00.000Z	timfrost	G_A_C	I suspect that is the case.  It wouldn't surprise me if a 2k or 4k key length works (or the old 8k key)
2009-07-21T14:51:00.000Z	G_A_C	timfrost	I agree, I'm just generating a new 2k key...if this works, do you think it's worth raising a bug against OpenSSH in Ubuntu?
2009-07-21T14:52:00.000Z	timfrost	G_A_C	Yes, if that works, then log a bug
2009-07-21T15:08:00.000Z	G_A_C	timfrost	I think it might be a bit of a problem with puttygen, I'm not sure. Creating new 2048 bit keys from puttygen and converting to OpenSSH didn't seem to fix my problem, but creating new 2048 bit keys with OpenSSH and importing them to puttygen did.
2009-07-21T15:15:00.000Z	timfrost	G_A_C	That is suspicious.  I must admit that I did all the key generation on ubuntu, and just used puttygen to convert from openssh to putty format.  It seems that a bug needs to be logged against puttygen, rather than against openssh.
2009-07-21T15:17:00.000Z	G_A_C	timfrost	I agree, I'm going to try and look into it a bit further with some separate keys (now I've got my new, smaller, main ones working) and see if I can figure out just where the problem lies
2009-07-21T15:17:00.000Z	timfrost	G_A_C	good luck.
