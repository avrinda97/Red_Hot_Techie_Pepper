2010-04-13T04:09:00.000Z	tom4949311		Hi. When creating an ext3 file system, is it possible to skip bad blocks that are on the partition?
2010-04-13T04:10:00.000Z	psusi	tom4949311	it is, but you shouldn't have any bad blocks
2010-04-13T04:11:00.000Z	tom4949311	psusi	What do you mean? Do you mean that if there any bad blocks on a hard drive, then that hard drive shouldn't be used?
2010-04-13T04:14:00.000Z	psusi	tom4949311	that's one way of looking at it... though sometimes a bad block isn't really bad and can be repaired
2010-04-13T04:15:00.000Z	tom4949311	psusi	Repaired how so? Would mkfs.ext3 /dev/sda1 be sufficient?
2010-04-13T04:16:00.000Z	psusi	tom4949311	no... first, what makes you think it has bad blocks?  have you checked with smartmon tools or palimpest?
2010-04-13T04:18:00.000Z	tom4949311	psusi	Files have been getting lost randomly over the past few months. A few weeks ago I did use smartmon and iirc it said there was bad blocks, but cannot be certain. I'm currently running mkfs.ext3 -cv /dev/sda1
2010-04-13T04:18:00.000Z	tom4949311	psusi	I'll run smartmon after that has finished.
2010-04-13T04:18:00.000Z	psusi	tom4949311	may as well ctrl-c the mkfs
2010-04-13T04:19:00.000Z	tom4949311	psusi	Oh?
2010-04-13T04:19:00.000Z	psusi	tom4949311	if you run the smartmon long test and it identifies a bad sector, you can try using hdparm or dd to write to the sector and see if it recovers
2010-04-13T04:20:00.000Z	psusi	tom4949311	it could be that one sector was in the middle of being written when you lost power or something so it was corrupted... but there's nothing physically wrong with the disk.... in that case, writing to that sector will correct the error
2010-04-13T04:20:00.000Z	tom4949311	psusi	And mkfs.ext3 -c will not detect that?
2010-04-13T04:21:00.000Z	psusi	tom4949311	if it is physically defective, then the drive should remap the address to the spare pool and you will see this in the smart numbers... if it's just one or two, you should be fine, if there are a lot, you should not use the drive anymore
2010-04-13T04:21:00.000Z	psusi	tom4949311	ohh, -c will detect it and just not use those blocks ever... it will not attempt to repair
2010-04-13T04:23:00.000Z	tom4949311	psusi	Do you have any idea how long a long smartmon test is compared to mkfs.ext3 -c ? I'm 50% through mkfs.ext3 -c and there are 20 minutes remaining.
2010-04-13T04:25:00.000Z	tom4949311	psusi	My connection dropped for a second. Did you say anything after my 23:23 line?
2010-04-13T04:25:00.000Z	psusi	tom4949311	probably around the same amount of time
2010-04-13T04:25:00.000Z	tom4949311	psusi	Ah ok. Thank you for your help.
