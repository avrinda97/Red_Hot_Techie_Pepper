2011-03-22T18:06:00.000Z	sipior	psusi	he is aware of his error :-)
2011-03-24T21:23:00.000Z	psusi	sipior	actually I think it only looks for forcefsck in the root volume..
2011-03-24T21:24:00.000Z	sipior	psusi	might be. i would hope that it would consult every entry in fstab. do you have documentation indicating this one way or another?
2011-03-24T21:26:00.000Z	psusi	sipior	no, I don't... but I'm now about curious enough to go look at the source code and find out ;)
2011-03-24T21:26:00.000Z	sipior	psusi	let me know what you find :-)
2011-03-24T21:29:00.000Z	sipior	psusi	yes, i see it now. in /etc/init/mountall.sh. looks like it only checks for the file in the system root.
2011-03-24T21:32:00.000Z	psusi	sipior	that's just the order fsck should be done in, not whether it should be done or not
2011-03-24T21:33:00.000Z	sipior	psusi	right, but that would be the time to check for that file.
2011-03-24T21:34:00.000Z	psusi	sipior	and it looks like it forces a fsck of all filesystems, using the order specified in /etc/fstab
2011-03-24T21:34:00.000Z	sipior	psusi	yep.
2011-03-24T21:35:00.000Z	sipior	psusi	i even stumbled onto a debian bug report requesting the ability to fsck just the root filesystem. guess that hasn't gone anywhere yet.
2011-03-24T21:37:00.000Z	psusi	sipior	for that, use tune2fs ;)
2011-03-24T21:37:00.000Z	sipior	psusi	yep.
2011-03-24T21:56:00.000Z	sipior	psusi	i guess half-right is better than nothing. 
2011-03-24T21:54:00.000Z	psusi	sipior	hrm... actually it looks like mountall doesn't use the fsck order parameter in /etc/fstab correctly.  If I'm reading this code right, it just checks if it is zero or not, and if not, forces a fsck.. it does nothing for order
2011-03-24T21:56:00.000Z	psusi	sipior	rather A fsck is done, not a -f force fsck.. if fstab has the order vaulue set to 0, then it isn't even given the default prune fsck if it isn't the root
2011-03-24T21:57:00.000Z	sipior	psusi	yeah, ubuntu defaults to "0" for all non-root filesystems, so maybe this was their way of making it fsck / only :-)
2011-03-24T23:01:00.000Z	psusi	sipior	holy crap man.  mountall is so smart.  It ignores the fstab order number, because it actually figures out what filesystems are on the same physical disk, and goes ahead and starts all of the fscks, but ionices all but one so they don't really compete with each other, then when the high priority one finishes, it ups the priority of one of the others
2011-03-24T23:02:00.000Z	sipior	psusi	huh, that's definitely going the extra mile.
