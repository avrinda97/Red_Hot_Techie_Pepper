2011-03-22T09:19:00.000Z	Knio		fork()/sys_clone()/process creation in general is really slow on some of my ubuntu machines, any idea what could cause this?
2011-03-22T09:21:00.000Z	Linuxpwns	Knio	Those machines running ubuntu are lacking resources? (low RAM, not multi-core processors, etc?)
2011-03-22T09:22:00.000Z	Knio	Linuxpwns	nope. as far as I can tell everything is the same as the machines where its fast (they are running the same set of services with the same load, almost identical hardware, etc)
2011-03-22T09:23:00.000Z	Linuxpwns	Knio	What about the priority of the process itself?
2011-03-22T09:25:00.000Z	Knio	Linuxpwns	I don't think we've changed anything there
2011-03-22T09:26:00.000Z	Linuxpwns	Knio	On a machine that is running perfectly fine, are the specs identical? Same CPU, RAM, etc...
2011-03-22T09:28:00.000Z	Knio	Linuxpwns	slightly different model of CPU, probably same for mb/ram, but all are comparable. tasks that don't involve fork() all complete in the same times, fork() is ~100 times slower on one
2011-03-22T09:29:00.000Z	Linuxpwns	Knio	Same kernel version as well?
2011-03-22T09:30:00.000Z	Knio	Linuxpwns	fast one is 2.6.32-30 and slow one is -26 :/ I can't reboot it to the newer kernel though. maybe I can find a different machine with the same kernel
2011-03-22T09:32:00.000Z	Linuxpwns	Knio	I see.  sudo apt-get update && sudo apt-get upgrade does not work on the offending machine?
2011-03-22T09:33:00.000Z	Linuxpwns	Knio	And you cannot reboot at this time, correct?
2011-03-22T09:33:00.000Z	Linuxpwns	Knio	You are currently using the server in production enviornment right now... am I correct?
2011-03-22T09:34:00.000Z	Linuxpwns	Knio	Do I get a cookie for that correct answer? Not the tracking kind.
2011-03-22T09:35:00.000Z	Linuxpwns	Knio	All of the machines which are using sys_clone have the same identical source code across all the platforms...  correct?
2011-03-22T09:36:00.000Z	Knio	Linuxpwns	yeah. its not our code that's slow, but running anything on the machine (like bash login scripts which fork a lot and call other scripts..)
2011-03-22T09:40:00.000Z	Knio	Linuxpwns	strace shows clone() being slow, my own benchmark used fork() (not sure what kernel call fork uses exactly)
2011-03-22T09:43:00.000Z	Linuxpwns	Knio	I'm not a programming expert but from what I gather, "fork" create a new addres space while "clone" share address space between parent and child
2011-03-22T10:19:00.000Z	Knio	Linuxpwns	I found another machine with the same kernel (-26) and workload as the slow one, but it's fast
2011-03-22T10:19:00.000Z	Linuxpwns	Knio	Interesting.
