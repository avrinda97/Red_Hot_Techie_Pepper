2005-12-26T11:55:00.000Z	disasm		i had my ubuntu hard drive die in my ubuntu amd64 laptop, I already was capable to get the whole file system copied over to my gentoo amd64 hard drive. I need to dump a database (postgresql) with client and invoice data. The data files are in /var/lib/postgresql/7.4/main/ I've tried running ubuntu in the chroot and i can't start postgresql with the error pg_ctl: cannot be run as root (running /etc/init.d/postgresql-7.4 start) I also have an
2005-12-26T11:56:00.000Z	kotatsu	disasm	I'm not certain, but it's likely that the postgres user doesn't exist on your system and it can't switch to something other than root... that would be my guess, anyway
2005-12-26T11:56:00.000Z	disasm	kotatsu	i can su postgres fine, but I can't run it because you need to be root to run init scripts (catch 22)
2005-12-26T11:57:00.000Z	kotatsu	disasm	and it's not switching itself to postgres' UID after starting?
2005-12-26T11:58:00.000Z	disasm	kotatsu	i think it might be a side affect of trying to start it in a chroot, it normally su's fine
2005-12-26T11:58:00.000Z	kotatsu	disasm	if I understand your problem right you copied the old filesystem wholesale to the gentoo box and you're running it from there... what I would do would be to install postgres on the gentoo box and access your database from that
2005-12-26T11:59:00.000Z	kotatsu	disasm	do you have proc, dev, and sys bound to the chroot?
2005-12-26T11:59:00.000Z	disasm	kotatsu	i have proc, what do i need to do for dev and sys?
2005-12-26T11:59:00.000Z	kotatsu	disasm	same thing, I've just noticed that programs will occasionally require access to one of the three
2005-12-26T11:59:00.000Z	kotatsu	disasm	mount -o bind
2005-12-26T12:00:00.000Z	kotatsu	disasm	but again I would install postgres on the gentoo system and access the old dbs from there rather than trying to run your old installation
2005-12-26T12:00:00.000Z	disasm	kotatsu	so mount -o bind /home/oldroot/ ???
2005-12-26T12:01:00.000Z	kotatsu	disasm	mount -o bind /proc /chroot/proc
2005-12-26T12:01:00.000Z	kotatsu	disasm	and so on for /sys and /dev
2005-12-26T12:01:00.000Z	kotatsu	disasm	no idea if that's your problem but I've have some programs break in the past when they do stuff in those directories
2005-12-26T12:02:00.000Z	kotatsu	disasm	it's possible it's choking on the su because it is missing something it's checking for, but then giving you the error message about su because that's the final effect
2005-12-26T12:02:00.000Z	disasm	kotatsu	su: Authentication service cannot retrieve authentication info.
2005-12-26T12:03:00.000Z	kotatsu	disasm	not sure, I would have to see your system to get a better idea of what's going on... my suggestion is to do a fresh install of postgres on the gentoo root fs and read your dbs from there
2005-12-26T12:03:00.000Z	kotatsu	disasm	gotta head out now though =)
