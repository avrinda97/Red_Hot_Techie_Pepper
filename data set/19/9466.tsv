2006-11-04T16:29:00.000Z	tictacaddict		so, anyone think they could help me get suid working with a script?
2006-11-04T16:29:00.000Z	sethk	tictacaddict	what is happening when you run the script?
2006-11-04T16:31:00.000Z	tictacaddict	sethk	the same thing happens whether it is suid or not: I get permission denied for some commands in the script. it works fine if I use sudo
2006-11-04T16:32:00.000Z	sethk	tictacaddict	hmm.  I'd run it under strace, see if it is trying to change the effective user ID.
2006-11-04T16:32:00.000Z	tictacaddict	sethk	sounds like a start.  how do I use strace, though?  strace command?
2006-11-04T16:33:00.000Z	sethk	tictacaddict	right
2006-11-04T16:33:00.000Z	sethk	tictacaddict	user -o whatever to get the stuff into a file rather than standard out
2006-11-04T16:35:00.000Z	tictacaddict	sethk	if it was trying to change the effective user id, what would I see in the output?
2006-11-04T16:35:00.000Z	sethk	tictacaddict	let me check ...
2006-11-04T16:36:00.000Z	sethk	tictacaddict	probably a call to su
2006-11-04T16:38:00.000Z	tictacaddict	sethk	I don't _think_ that there is a call to su.
2006-11-04T16:39:00.000Z	sethk	tictacaddict	all look up the library call that su makes
2006-11-04T16:50:00.000Z	tictacaddict	sethk	It may be that scripts just can't be used suid.  The interpreter (bash here) runs as root but not the commands in the script.  That's what one thing I found said, anyway.  That kind of makes sense, but I did get the impression that I could set a script suid and get it to run all the commands as root.
2006-11-04T16:50:00.000Z	sethk	tictacaddict	you can, yes
2006-11-04T16:51:00.000Z	sethk	tictacaddict	you can also use sudo, or su, within a script.  But that's just to work around the fact that I'd have to figure out how to do what you are trying to do.  your original concept is correct.
2006-11-04T16:53:00.000Z	tictacaddict	sethk	do you mean I should be able to get it to work like I intended?  suid script that runs commands as root?
2006-11-04T16:53:00.000Z	sethk	tictacaddict	yes, exactly
2006-11-04T16:55:00.000Z	tictacaddict	sethk	I wonder what the problem is, then :/ ... it's not a big deal in this case, but it would be handy.
2006-11-04T16:56:00.000Z	sethk	tictacaddict	In the back of my mind there is a trick to it.  Possibly something in the system has to be toggled to allow the script to do it.  It's kind of a hazy memory, but I'll remember it eventually.
