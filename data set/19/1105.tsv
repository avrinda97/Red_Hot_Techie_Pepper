2012-06-04T12:44:00.000Z	alankila	bluebomber	at the very least try to narrow it down, open /var/lib/dpkg/info/grub-pc.whateverscriptitisexecuting and try to execute the commands yourself in the same sequence until you hit segfault or something
2012-06-04T12:48:00.000Z	bluebomber	alankila	Thank you.
2012-06-04T13:01:00.000Z	bluebomber	alankila	It looks like grub-mkconfig is segfaulting.
2012-06-04T13:02:00.000Z	alankila	bluebomber	good, you can probably replicate the bug by just executing the command from the command line, so you can now strace -f it maybe, try to gather clues where the segfault arises, or something such.
2012-06-04T13:05:00.000Z	bluebomber	alankila	OK, great, now I see it's grub-probe that's segfaulting, and that's _not_ a script. :-s
2012-06-04T13:06:00.000Z	alankila	bluebomber	progress. that might be strace-able
2012-06-04T13:24:00.000Z	bluebomber	alankila	Getting closer, it looks like grub-probe is segfaulting when trying to read from a mounted drive partition. Do you have any ideas where I go from here? I will say that this drive partition is part of a RAID5 which is currently assembled and mounted, but rebuilding.
2012-06-04T13:25:00.000Z	alankila	bluebomber	okay ... well, at this point you have a number of facts to aid you. You know the problematic program, that it relates to raid, and you can acquire the version of grub-pc you can install, and google.
2012-06-04T13:25:00.000Z	alankila	bluebomber	you could also try to get the source code and fix the bug, of course
2012-06-04T13:26:00.000Z	alankila	bluebomber	out of interest, what version of grub-pc are you trying to install?
2012-06-04T13:28:00.000Z	bluebomber	alankila	I don't know and I don't know how to tell you. It's apt-get install grub-pc :-(
2012-06-04T13:28:00.000Z	alankila	bluebomber	'dpkg -l grub-pc'
2012-06-04T13:29:00.000Z	alankila	bluebomber	if it's precise, should be 1.99-21ubuntu3.1
2012-06-04T13:30:00.000Z	bluebomber	alankila	Can I bug you with just one more question: Do you think it's safe to turn off or reboot my computer in this state?
2012-06-04T13:31:00.000Z	bluebomber	alankila	I think I found a relevant bug in debian's tracker from 2010, but it says it's been fixed. grub-probe segfaults on systems with RAID5s containing spares. Mine don't have spares, but one is rebuilding.
2012-06-04T13:31:00.000Z	alankila	bluebomber	well ... I have poor experience myself. When grub fails to reinstall on a system, it's often broken on the next boot and you need to boot via CD or some such recovery mechanism
2012-06-04T13:33:00.000Z	alankila	bluebomber	this grub stuff might be on the way out anyway because the booting problem is probably migrating to be BIOS's problem. It's frankly ridiculous how complicated it is, but that is because there's all these weird setups these bootloaders try to support
2012-06-04T13:34:00.000Z	alankila	bluebomber	your other alternatives may be to boot using LILO or try the grub-legacy which should be the grub 1.0 thing until they get grub 2 in working order for your setup
2012-06-04T13:37:00.000Z	bluebomber	alankila	I hope installation works after the synchronization finishes!
