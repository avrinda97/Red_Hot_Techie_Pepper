2009-06-10T22:33:00.000Z	buttons840		I have a headless server, and I continually mess it up by compiling multiple source packages.  I'm experimenting and learning.  I'm tired of hooking a monitor and keyboard up to it for reinstall, and I want a way to restore the system to fresh install state through SSH.  I've been looking at partimage, and it think it would work (I don't know for sure), but I cannot partimage the main partition without unmounting it.  Is it possi
2009-06-10T22:33:00.000Z	buttons840		ble to unmount / to image it?
2009-06-10T22:35:00.000Z	dhendrix	buttons840	 hmmm, interesting question :-) I would suggest using chroot to change into a sandboxed environment so you don't have to risk messing up your main system.
2009-06-10T22:36:00.000Z	buttons840	dhendrix	chroot and sandboxed, i'm not familliar with these?   i will man chroot, but what is sandboxed?
2009-06-10T22:36:00.000Z	dhendrix	buttons840	Oh, "sandbox" just refers to an environment that is isolated from the main system.
2009-06-10T22:36:00.000Z	buttons840		is this ability avialble in a default install?  dhendrix
2009-06-10T22:37:00.000Z	dhendrix	buttons840	 You can use "debootstrap" to create a whole debian environment, then chroot into it and experiment without risking your main system.
2009-06-10T22:37:00.000Z	dhendrix	buttons840	 Yeah, i think chroot is available without installing additional packages.
2009-06-10T22:38:00.000Z	buttons840	dhendrix	debootstrap another thing i'm unfamillair with
2009-06-10T22:38:00.000Z	dhendrix	buttons840	 i just learned about it a couple weeks ago myself. There's a really good HOWTO on the web -- I'll try and dig it up real fast.
2009-06-10T22:39:00.000Z	dhendrix	buttons840	 try http://www.debian-administration.org/articles/426
2009-06-10T22:39:00.000Z	buttons840	dhendrix	thanks, i'll take a look
2009-06-10T22:42:00.000Z	dhendrix	buttons840	 Oh, and one more thing to note. When you have your new environment setup (with debootstrap), you might need to bindmount /dev and /proc before chroot'ing. You can do this with: mount -o bind /proc test_environment/proc and mount -o bind /dev test_environment/dev.
2009-06-10T22:43:00.000Z	buttons840	dhendrix	i'm not sure what that means, but i'll remember it if i run into problems ;)
2009-06-10T22:43:00.000Z	dhendrix	buttons840	 So the steps are basically: 1) get the new environment bootstrapped 2) bindmount /proc and /dev, and maybe /sys and 3) chroot 4) enjoy
2009-06-10T22:44:00.000Z	buttons840	dhendrix	so your suggesting i have a bootstrapped ubuntu running withing ubuntu and that using ubuntu i can reinstall a fresh ubuntu without messing up ubuntu?
2009-06-10T22:44:00.000Z	dhendrix	buttons840	 It just means that files in /proc and /dev will be usable within your chroot'ed environment. /dev and /proc are special in that their contents are populated on-the-fly by the kernel. So debootstrap will not be able to fill them in for you.
2009-06-10T22:44:00.000Z	dhendrix	buttons840	 I think so, yes. Give it a try and let me know if you run into difficulties :-)
2009-06-10T22:45:00.000Z	buttons840	dhendrix	anyways, looks like  a good article you gave, i'm reading it and i'l try to catch you if i have more problems, thanks again
