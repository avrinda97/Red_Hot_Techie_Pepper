2008-12-24T12:18:00.000Z	skar		hi, i'm creating a hardy chroot and am getting "Can not write log, openpty() failed (/dev/pts not mounted?)" while setting up postgres within the chroot, any idea how to fix it?
2008-12-24T12:19:00.000Z	herb	skar	mount -t devpts devpts-chroot /path/to/chroot
2008-12-24T12:20:00.000Z	herb	skar	there are potential security concerns with that, but it should solve your issue.
2008-12-24T12:20:00.000Z	skar	herb	 thanks, will try it, u mean programs within chroot can grab stdin/out of programs outside it and so on?
2008-12-24T12:21:00.000Z	herb	skar	potentially, yes.
2008-12-24T12:21:00.000Z	skar	herb	ok, will not mount it during production, only during dev then :)
2008-12-24T12:21:00.000Z	herb	skar	good plan.
2008-12-24T12:28:00.000Z	skar	herb	i'm still getting the "Can not write log, openpty() failed (/dev/pts not mounted?)", but /dev/pts has several char device files 0-9 inside it
2008-12-24T12:30:00.000Z	herb	skar	sorry.  so what I've done in my chroots in the past: 'mount --bind /dev /path/to/chroot/dev' and 'mount -t devpts devpts-chroot /path/to/chroot/dev/pts'
2008-12-24T12:30:00.000Z	herb	skar	it's possible because we didn't do the first, the 2nd didn't solve your problem.
2008-12-24T12:30:00.000Z	skar	herb	so /dev is the HOST dev dir, and pts is remounted as devpts-chroot?
2008-12-24T12:31:00.000Z	herb	skar	exactly
2008-12-24T12:31:00.000Z	skar	herb	ok thanks will try it
2008-12-24T12:31:00.000Z	herb	skar	welcome. hope it works.
2008-12-24T12:33:00.000Z	skar	herb	yup this works, though i don't like the idea of all /dev files like sda etc being accessible inside the chroot, with pts being remounted anyway, why does this cause a problem?
2008-12-24T12:34:00.000Z	herb	skar	yeah. it is ugly.  it's fine for testing, but I certainly wouldn't go to production with it. I would suggest using a more complete virtualization system if you need this type of functionality. openvz, kvm, vmware, virtualbox come to mind.
2008-12-24T12:35:00.000Z	skar	herb	thanks anyways, would do for me for dev, production probably doesn't need pts anyway
2008-12-24T12:35:00.000Z	herb	skar	good luck.  hope it works for you.
2008-12-24T12:36:00.000Z	skar	herb	yup it better work, else the heavy virtual stuff are the remaining options, not light enough for me
