2009-01-08T21:08:00.000Z	shannon		I was under the impression that if I want to backup a large amount of files to an external hard drive then if I use rsync I can be sure that no corruption or anything occurred during the copy, because rsync does some cryptographic checks. Whereas with a normal copy, some files might be messed up in the backup. Is this correct?
2009-01-08T21:10:00.000Z	milesd	shannon	I don't think rsync uses a cryptographically secure hash
2009-01-08T21:12:00.000Z	shannon	milesd	-- I just copied all the files to an external drive, I now want to format the original drive, hence I want to know the backup is correct first so I don't lose anything
2009-01-08T21:16:00.000Z	milesd	shannon	no, there are ways to be more sure, but at this point the probability of corruption is *amazingly* low... I'd trust it
2009-01-08T21:18:00.000Z	milesd	shannon	yes, definitely
2009-01-08T21:18:00.000Z	shannon	milesd	yes, it was not any better?
2009-01-08T21:19:00.000Z	milesd	shannon	Seveas: quite correct, I missed the "no" rsync is much better
2009-01-08T21:20:00.000Z	shannon	milesd	so what exactly does rsync do that makes it better? That it splits the data into chunks and sends a hash of each chunk?
2009-01-08T21:21:00.000Z	milesd	shannon	no, it's not quite that sophisticated. It's designed to avoid sending any bits over a wire that are already present on the other side. So it does a simple hash (probably md5, I'm not sure) on each file before sending it
2009-01-08T21:22:00.000Z	shannon	milesd	yeah, that's what I read in the man page. But it sounds like that has no effect on correctness
2009-01-08T21:22:00.000Z	milesd	shannon	so you can be sure as far as you trust whatever hash rsync is doing (you can probably find that in the man page) that the files you copied are the same in the place you copied them *to* as they were on the pace you copied them from
2009-01-08T21:22:00.000Z	milesd	shannon	...no, actually you can't
2009-01-08T21:22:00.000Z	milesd	shannon	do rsync a second time
2009-01-08T21:23:00.000Z	milesd	shannon	and if you see it go without transferring anything, *then* you can trust it as far as you trust that hash
2009-01-08T21:23:00.000Z	shannon	milesd	-- ok, thanks
2009-01-08T21:23:00.000Z	milesd	shannon	if you see it transfer something in the second pass, that thing was corrupted
2009-01-08T21:24:00.000Z	milesd	shannon	so make sure you do it as many times as you need to so it doesn't transfer something on the N'th pass
2009-01-08T21:26:00.000Z	shannon	milesd	-- ok, I'll do that. But actually I think rsync uses mtimes and filenames to check for changes by default, and I will need to specify the option to use hashes to check for changes. And in the meantime I'm gonna put it to #rsync and see if anyone has any comments there
