2006-12-03T16:27:00.000Z	bam_		or maybe you guys could help. I have set up a "iptables" firewall where everything is "dropped" except input on TCP port 21 and output on TCP port 21, but still I cant connect to my ftp server. Any ideas on what could be wrong?
2006-12-03T16:29:00.000Z	Sinistrad	bam_	you probably need port 20 open also, and also allow anything in an established or related state.
2006-12-03T16:31:00.000Z	Sinistrad	bam_	are the clients able to connect to the server or do they timeout? do they timeout during a specific operation after they're connected?
2006-12-03T16:32:00.000Z	Sinistrad	bam_	opening 20 will probably help.
2006-12-03T16:38:00.000Z	Sinistrad	bam_	do you have any other services that work?
2006-12-03T16:38:00.000Z	Sinistrad	bam_	also note that the chains are checked in order (from top to bottom), so if you have something dropping packets before it gets to your allow rule, they'll get dropped.
2006-12-03T16:39:00.000Z	Sinistrad	bam_	additionally, you probably need to have a rule that accepts anything in an ESTABLISHED or RELATED state.
2006-12-03T16:39:00.000Z	Sinistrad	bam_	consider using a command-line ftp client in PASV mode for your test...
2006-12-03T16:42:00.000Z	Sinistrad	bam_	I think you misunderstood -- for your client tests, use the comand-line "ftp" command...after you enter your username/password (if it actually connects and gives you a prompt of some kind) type in "PASV" and see if you can do file transfers that way
2006-12-03T16:44:00.000Z	Sinistrad	bam_	which is why you should use the command-line client...you'll probably get something better than nothing (at least, an error message)
2006-12-03T16:51:00.000Z	bam_	Sinistrad	Your were totally right, but everything works great without the -p (passive) option on the ftp. I get connected and can see all the home area. What could be wrong? Is it the browsers faults or what?
2006-12-03T16:51:00.000Z	Sinistrad	bam_	did you test a file transfer on the command-line?
2006-12-03T16:52:00.000Z	Sinistrad	bam_	(I assume that you're testing command-line and browser on the same client system)
2006-12-03T16:54:00.000Z	Sinistrad	bam_	then it ought to work with opera :)
2006-12-03T16:55:00.000Z	Sinistrad	bam_	does "lsmod|grep ftp" (on the server) show anything?
2006-12-03T16:55:00.000Z	Sinistrad	bam_	there is an ip_conntrack_ftp module that I've heard should be loaded when doing ftp firewalling stuff...
2006-12-03T16:57:00.000Z	Sinistrad	bam_	but really, if it's working with the command-line client, opera should work.
2006-12-03T16:57:00.000Z	bam_	Sinistrad	I have to go, but thx for the help. Thanks alot. :)
