2009-04-03T19:33:00.000Z	thebaypp		can anyone please assist me - i need to add www-data to the sudoers so it can run sh scripts from createpassword.php
2009-04-03T19:33:00.000Z	Ubersoldat	thebaypp	sudo visudo
2009-04-03T19:33:00.000Z	Ubersoldat	thebaypp	visudo
2009-04-03T19:33:00.000Z	thebaypp	Ubersoldat	yes i am using that - and have got so far...
2009-04-03T19:35:00.000Z	Ubersoldat	thebaypp	so... you've got pretty good examples in the sudoers file
2009-04-03T19:35:00.000Z	thebaypp	Ubersoldat	www-data        ALL=NOPASSWD: ALL - however this gives the user sudo access what all scripts
2009-04-03T19:35:00.000Z	thebaypp	Ubersoldat	i only want to accept sudo calls from one specific php scirpt
2009-04-03T19:36:00.000Z	Ubersoldat	thebaypp	maybe you're asking the wrong question
2009-04-03T19:39:00.000Z	thebaypp	Ubersoldat	I will explain. I am running apache2 with www-data as it's user. I have a php script that has a line "exec(udo sh /home/seren/seren_drop.sh 2>&1)" - which uses iptables commands... currently I can use these files fine with the ALL notation in the sudoers... however, I'd rather not leave www-data to run wild. So, how can i make sure that either www-data can only run that .sh file (and iptbales) - or only execute comm
2009-04-03T19:42:00.000Z	Ubersoldat	thebaypp	http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_:_Ch09_:_Linux_Users_and_Sudo#Granting_Access_To_Specific_Users_To_Specific_Files
2009-04-03T19:49:00.000Z	thebaypp	Ubersoldat	thank you for the link, i have read the section i require and have added this line to visudo
2009-04-03T20:02:00.000Z	thebaypp	Ubersoldat	any further ideas?
2009-04-03T20:04:00.000Z	Ubersoldat	thebaypp	try taking sudo from the whole thing and use permissions of groups to accomplish it
2009-04-03T20:07:00.000Z	thebaypp	Ubersoldat	not sure what you mean by taking sudo...
2009-04-03T20:07:00.000Z	Ubersoldat	thebaypp	don't use sudo
2009-04-03T20:08:00.000Z	thebaypp	Ubersoldat	I get permission denied then...
2009-04-03T20:09:00.000Z	Ubersoldat	thebaypp	change group permisssions to the binary the script executes
2009-04-03T20:09:00.000Z	thebaypp	Ubersoldat	on the .sh?
2009-04-03T20:10:00.000Z	thebaypp	Ubersoldat	yeah - that just seems a messy way to do it... i hope to use a whol load of binaries... will i have to add each one?
2009-04-03T20:11:00.000Z	Ubersoldat	thebaypp	well, it's messy to do system calls from a PHP script
2009-04-03T20:11:00.000Z	thebaypp	Ubersoldat	hmm, point.
