2011-06-18T15:42:00.000Z	oliver3		So I'm running the latest Ubuntu on a relatively well powered machine, yet every time I install updates it slows to a crawl. I can't even move the mouse, anyone know if this is a known issue?
2011-06-18T15:43:00.000Z	oliver3		Relatively well powered is Intel Core 2 Quad Q6600, 2GB DDR2 RAM @ 1066MHz, ATI Radeon HD 4670 1GB VRAM
2011-06-18T15:43:00.000Z	wols	oliver3	run "top" besides your updates install and check what is causing the problem. it sounds a bit like non-dma disk access
2011-06-18T15:43:00.000Z	oliver3	wols	thanks, next time I do an update I'll do that.
2011-06-18T15:44:00.000Z	oliver3	wols	shocked I didn't think of that myself to be honest
2011-06-18T15:47:00.000Z	oliver3	wols	whenever I run hdparm on /dev/sda (my primary HDD) I get "* failed: Inappropriate ioctl for device", no matter what the query is
2011-06-18T15:47:00.000Z	oliver3	wols	don't suppose you know what causes that?
2011-06-18T15:48:00.000Z	oliver3	wols	e.g., HDIO_GET_DMA failed: Inappropriate ioctl for device
2011-06-18T15:48:00.000Z	wols	oliver3	what SATA controller? what disks, cables all working as they should?
2011-06-18T15:50:00.000Z	oliver3	wols	Intel 82801JI (ICH10 Family) (from lspci), Samsung 640GB SATA II HDD. SATA controller is onboard an Asus P5QL
2011-06-18T15:51:00.000Z	wols	oliver3	if you can, replace the cable? check maybe a knoppix or other live cd to test the connection? do a long smartctl test?
2011-06-18T15:51:00.000Z	oliver3	wols	hdparm -i works, according to that udma6 is enabled
2011-06-18T15:52:00.000Z	wols	oliver3	but "HDIO_GET_DMA failed: Inappropriate ioctl for device" says otherwise :)
2011-06-18T15:54:00.000Z	oliver3	wols	okay I'll try switching the cable when I get the time, thanks for your help.
2011-06-18T15:54:00.000Z	wols	oliver3	it might not be the cable. can't really say what it is, I just suggested things to try to pinpoint the problem
2011-06-18T15:54:00.000Z	oliver3	wols	yeah I know. Thanks again for pointing me in the right direction.
2011-06-18T15:57:00.000Z	oliver3	wols	oh... apparently SATA drives don't use DMA/UDMA anyway...
2011-06-18T15:57:00.000Z	oliver3	wols	which is probably why hdparm reports it as unsupported.
2011-06-18T15:57:00.000Z	wols	oliver3	they sure do. it's named differently but they definitely don't ues programmed IO :)
2011-06-18T15:58:00.000Z	oliver3	wols	not programmed, but not DMA either. Apparently DMA was just used on PATA devices.
2011-06-18T15:58:00.000Z	wols	oliver3	they do, cause there are only two choices: use busmaster DMA or programmed IO via the CPU, and no SATA disk want to use PIO
