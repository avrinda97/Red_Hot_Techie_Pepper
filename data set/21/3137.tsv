2009-09-29T23:00:00.000Z	rcscomp		I have a user on my box with some web files in their home directory.  I want apache to be able to serve them, but am getting permissions errors.  Currently, it only works if I give o+rX permissions.  Should I be able to add www-data to my userr's group and then give g+rX instead?
2009-09-29T23:00:00.000Z	grawity	rcscomp	No, don't add users to www-data.
2009-09-29T23:00:00.000Z	rcscomp	grawity	I didn't, I was planning on adding www-data to the user's group
2009-09-29T23:01:00.000Z	grawity	rcscomp	Just set their homedir to o+x, and their public_html to o+rx
2009-09-29T23:01:00.000Z	rcscomp	grawity	I don't want other users on the system to be able to read it, only the apache user
2009-09-29T23:01:00.000Z	grawity	rcscomp	Hmmm.
2009-09-29T23:02:00.000Z	rcscomp	grawity	sorry, I thought that is what groups were for.  I didn't realize it would be so complicated.
2009-09-29T23:02:00.000Z	grawity	rcscomp	Then, chgrp -R www-data ~user/public_html; find ~user/public_html -type d -exec chmod g+s '{}' \;
2009-09-29T23:02:00.000Z	rcscomp	grawity	a, yes, I could do that
2009-09-29T23:02:00.000Z	grawity	rcscomp	In other words, set www-data as the group of all files in public_html -- and set sgid for all subdirectories (including public_html itself).
2009-09-29T23:03:00.000Z	grawity	rcscomp	But it'll still need o+x on ~user/ -- but this doesn't give read access, only execute/cd, so it isn't a security hole.
2009-09-29T23:04:00.000Z	rcscomp	grawity	k, I will give it a shot.  Thanks.
2009-09-29T23:04:00.000Z	grawity	rcscomp	But, if it's going to be a website, why do you want it to be unreadable by users?
2009-09-29T23:04:00.000Z	grawity	rcscomp	I mean, they can access it through HTTP, what's the point in forbidding direct access.
2009-09-29T23:06:00.000Z	rcscomp	grawity	its a web application actually, source code, etc.
2009-09-29T23:07:00.000Z	grawity	rcscomp	PHP, I guess? And other users can have their webpages too?
2009-09-29T23:07:00.000Z	rcscomp	grawity	python actually
2009-09-29T23:08:00.000Z	grawity	rcscomp	Still the same thing.
2009-09-29T23:09:00.000Z	grawity	rcscomp	This is a PHP example, but should give you the general idea:  header("Content-Type: text/plain"); $fh = fopen("/home/other-user/public_html/index.php", "r"); fpassthru($fh); fclose($fh);
2009-09-29T23:09:00.000Z	rcscomp	grawity	more like other applications can be running and if one gets compromised I don't want it to have permissions to read other applicaitons code/data
2009-09-29T23:11:00.000Z	rcscomp	grawity	applications will run as their own user.  I am just having some problems with the initial config file getting red by www-data, once the config file gets read, then the apache process switches to use the user that owns that file.  So by setting permissions right, only one file in the whole app should be readable by other applications inside apache.
