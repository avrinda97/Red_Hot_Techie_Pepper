2012-11-21T17:40:00.000Z	Frostbyte		Hi there, I have a persistent live usb made up, for a month or so - and as of latelly I've been noticing huge lags and I/O with flush-8:16 taking up almost all the cpu - is there anything I can do to lighten it up? (And if possible any other optimisations to reduce disk I/O since I run from USB)
2012-11-21T17:42:00.000Z	TJ-	Frostbyte	Is it getting full? If there's lots of random I/O going on that could be upsetting any flash wear-levelling the device does
2012-11-21T17:42:00.000Z	Frostbyte	TJ-	: nah, casper-rw and home-rw partitions do have free space left\
2012-11-21T17:43:00.000Z	TJ-	Frostbyte	how about the underlying flash wear-levelling though? Every time a block is unlinked a new block is used to contain the modified contents
2012-11-21T17:44:00.000Z	Frostbyte	TJ-	could it have worn out already?
2012-11-21T17:44:00.000Z	TJ-	Frostbyte	Well, lets imagine it doesn't do wear-levelling. That could imply the same physical flash blocks are being erased and re-written to... and they can wear out in less than 1000 erase cycles, especially for MLCs
2012-11-21T17:45:00.000Z	TJ-	Frostbyte	alternatively, it may be just that you've got a process that likes flushing data to disk, maybe a swap file? Not a fab idea to put swaps on most flash devices.
2012-11-21T17:50:00.000Z	TJ-	Frostbyte	First thing is to use something like iotop to see what's the most active
2012-11-21T17:51:00.000Z	TJ-	Frostbyte	Does the system have enough RAM? If it is under pressure the kernel will evict pages from its cache and then have to fetch them again later when needed
2012-11-21T17:53:00.000Z	TJ-	Frostbyte	OK, but how about the cache usage? The 'free' memory is used by the kernel for cache and buffers and gets evicted when some process needs more RAM. As I said, try iotop see if it gives any clue as to which process is responsible for forcing the flushes - if they are the reason
2012-11-21T17:55:00.000Z	TJ-	Frostbyte	That flush-8:16 tells you which device it is 8 is the major number, 16 is the device number. check that with "ls -l /dev/block/8:16"
2012-11-21T17:56:00.000Z	TJ-	Frostbyte	and what does sdb translate to as a physical device on that system? Is it the USB device?
2012-11-21T17:58:00.000Z	TJ-	Frostbyte	no need, just do "grep sdb /var/log/kern.log"
2012-11-21T17:59:00.000Z	TJ-	Frostbyte	:D
2012-11-21T18:00:00.000Z	Frostbyte	TJ-	could it be that it's because I converted it from ext3 to 4?
2012-11-21T18:00:00.000Z	TJ-	Frostbyte	It's possible, yes. ext4 does enforce some flushing due to sync issues
2012-11-21T18:00:00.000Z	Frostbyte	TJ-	aw kr@p
2012-11-21T18:00:00.000Z	TJ-	Frostbyte	But I thought that applied to ext3 as well, but its a while since I read up on that side of things
2012-11-21T18:01:00.000Z	TJ-	Frostbyte	No. Not unless you can *prove* that is the cause of the issues of slowness, which is, as I understand it, your primary issue?
2012-11-21T18:08:00.000Z	Frostbyte	TJ-	Dunno if it gives any clue - but I sometimes see [sync-supers] and a zeitgeist-fts getting momentarilly 99% io
2012-11-21T18:08:00.000Z	TJ-	Frostbyte	hehehe I know the feeling. PCs run scared of me and start behaving in case I thump them :p
2012-11-21T18:14:00.000Z	Frostbyte	TJ-	I have disabled ext4 journaling btw
2012-11-21T18:14:00.000Z	TJ-	Frostbyte	I doubt its the journal
2012-11-21T18:18:00.000Z	Frostbyte	TJ-	Perhaps since compiz and Xorg do consume some cpu from time to time - switching to a lighter interface than unity might help?
