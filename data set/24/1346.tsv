2010-02-26T16:09:00.000Z	yeshuah		How do I restrict the resources used by a script run by cron?
2010-02-26T16:10:00.000Z	brjann	yeshuah	do you just want to make it play nicely and not interfere with interactive processes?
2010-02-26T16:11:00.000Z	yeshuah	brjann	I have a python script which runs once a day - but it is running for 1-2 hours and during this time, all my other processes (webservers) are crippled
2010-02-26T16:11:00.000Z	brjann	yeshuah	the simplest thing to try is the 'nice' command
2010-02-26T16:12:00.000Z	brjann	yeshuah	and just plain old nice
2010-02-26T16:13:00.000Z	yeshuah	brjann	whats the difference?
2010-02-26T16:13:00.000Z	brjann	yeshuah	nice launches a process with a given niceness. renice changes the niceness of an already-running process. ionice is like nice, but for IO instead of load
2010-02-26T16:24:00.000Z	yeshuah	brjann	ok have run renice on the process running now - setting it to 19 - but I get no performance increase on my webserver
2010-02-26T16:24:00.000Z	brjann	yeshuah	what is the script doing exactly?
2010-02-26T16:25:00.000Z	brjann	yeshuah	IO-heavy work? number crunching?
2010-02-26T16:25:00.000Z	yeshuah	brjann	it's parsing an xls file - comparing to an xml file - and creating a 2nd xml file from this
2010-02-26T16:25:00.000Z	yeshuah	brjann	so maybe ionice is more important?
2010-02-26T16:26:00.000Z	brjann	yeshuah	could be, if it's hitting the disk often enough that it's increasing latency for everybody
2010-02-26T16:31:00.000Z	brjann	yeshuah	if nicing doesn't help you might want to read up on /etc/security/limits.conf next :)
2010-02-26T16:31:00.000Z	yeshuah	brjann	will take a peep
2010-02-26T16:32:00.000Z	brjann	yeshuah	be forewarned though that limits can be set harsh enough to cause the kernel to kill the process, and you probably don't want that. so tread lightly. :)
2010-02-26T16:37:00.000Z	yeshuah	brjann	ok sounds scary - ok I can see with free that all my memory is being filled by the process - is there anyway to limit a process to only use like 50 of available RAM? - or this is /etc/security/limits.conf ?
2010-02-26T16:43:00.000Z	brjann	yeshuah	are you sure your process is actually using all the memory? it's normal for the free memory to be low, as the kernel uses the space for IO buffers, etc
2010-02-26T16:45:00.000Z	yeshuah	brjann	hmm according to pmap then 0k
2010-02-26T16:46:00.000Z	brjann	yeshuah	probably because your script is running as root and you're not? try sudo pmap <pid> :)
2010-02-26T16:46:00.000Z	yeshuah	brjann	ah no - just forgot to run with sudo - 463564K
2010-02-26T16:47:00.000Z	brjann	yeshuah	hm. i'm not sure what the best way to limit the memory usage is without risking killing the script.
2010-02-26T16:48:00.000Z	brjann	yeshuah	so i will take this opportunity to go to bed :) sorry i couldn't help more!
2010-02-26T16:48:00.000Z	yeshuah	brjann	thanks for trying to help
