2009-06-27T04:43:00.000Z	volve		So if I'm running rsync over ssh, I can't run as root because the remote system has root ssh login disabled, so how can I preserve the owner of the files I'm transferring? :/
2009-06-27T04:44:00.000Z	dazjorz	volve	try tar -A, it saves username etc
2009-06-27T04:44:00.000Z	dazjorz	volve	tar in archiving mode :)
2009-06-27T04:44:00.000Z	volve	dazjorz	but won't that kind of defeat the benefits of rsync? :/
2009-06-27T04:46:00.000Z	dazjorz	volve	yes, it will
2009-06-27T04:46:00.000Z	dazjorz	volve	but then, only root is allowed to write files as a different user
2009-06-27T04:47:00.000Z	dazjorz	volve	what you may want to try, is to get rsync to not run rsync remotely, but "sudo rsync"
2009-06-27T04:47:00.000Z	volve	dazjorz	right, right, hmm, maybe I can use --rsync-path and do something clever on the remote system... :)
2009-06-27T04:47:00.000Z	dazjorz	volve	then add the user to /etc/sudoers as NOPASSWD (use `visudo')
2009-06-27T04:47:00.000Z	dazjorz	volve	it will allow rsync to write files as root :)
2009-06-27T04:47:00.000Z	volve	dazjorz	exactly, interesting, thanks :)
2009-06-27T04:48:00.000Z	volve	dazjorz	actually, can a sudoers entry only allow certain commands to be run as NOPASSWD? I'd feel uncomfortable having an entire user set to NOPASSWD
2009-06-27T04:49:00.000Z	dazjorz	volve	yep :)
2009-06-27T04:49:00.000Z	dazjorz	volve	see man sudoers
2009-06-27T04:58:00.000Z	volve	dazjorz	well the difference being that I could run rsyncd on the remote system as super without worrying about the firewall, or sudo command aliases, etc. (I think, right?)
2009-06-27T04:59:00.000Z	dazjorz	volve	you'd still have the same problems as running rsync just like that
2009-06-27T04:59:00.000Z	dazjorz	volve	you don't need to alias the rsync command o_O
2009-06-27T04:59:00.000Z	volve	dazjorz	in sudoers I mean, I want to explicitly list the 1 command that can be used with NOPASSWD
2009-06-27T05:00:00.000Z	dazjorz	volve	that's very much possible
2009-06-27T05:00:00.000Z	dazjorz	volve	also, I'm quite sure rsync has a way to say "the remote command is 'sudo rsync'"
2009-06-27T05:00:00.000Z	volve	dazjorz	it does, yes: --rsync-path='sudo rsync'
2009-06-27T05:01:00.000Z	volve	dazjorz	but I'm just trying to understand the combination of options I need to add to sudoers right now :)
2009-06-27T05:02:00.000Z	dazjorz	volve	something like this:
2009-06-27T05:04:00.000Z	volve	dazjorz	I just came to that same conclusion, thank you :D
