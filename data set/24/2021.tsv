2009-08-13T12:48:00.000Z	llml		i'm working on a bash script, some of the commands should be done as super user. but the others should NOT. how can i let it run automatically? not stopped by the sudo password requirement
2009-08-13T12:50:00.000Z	llml		Anyone: I'm working on a bash script, some of the commands should be done as super user. but the others should NOT. how can i let it run automatically? not stopped by the sudo password requirement
2009-08-13T12:51:00.000Z	Gnea	llml	just add a function to check the id to see if it's root or not
2009-08-13T12:52:00.000Z	llml	Gnea	then automatically run? not interrupted by sudo password requirement?
2009-08-13T12:53:00.000Z	Gnea	llml	it doesn't even do sudo or go anywhere near there, just see if the account running it is a root account or not. how you run it from there is up to you.
2009-08-13T12:54:00.000Z	Gnea	llml	if [ `id -u` == "0" ]; then blahblahblah; else if [ `id -u` != "0" ]; then yadayadayada; fi    something like that
2009-08-13T12:54:00.000Z	llml	Gnea	yeah, gotcha, maybe we are not focusing on the same problem.
2009-08-13T12:55:00.000Z	llml	Gnea	i mean. say, in the script: touch xxx; sudo touch xx
2009-08-13T12:55:00.000Z	Gnea	llml	what i'm saying is, in the script, if it's a root account, it can touch the script, otherwise it can't.
2009-08-13T12:56:00.000Z	Gnea	llml	what i'm saying, is that the script itself should be run by sudo
2009-08-13T12:56:00.000Z	Gnea	llml	otherwise you create more subroutines than is necessary
2009-08-13T12:56:00.000Z	llml	Gnea	i see, then all commands in the scripts will be run as sudoers, right?
2009-08-13T12:57:00.000Z	llml	Gnea	but i need some of them run as normal user
2009-08-13T12:57:00.000Z	Gnea	llml	if you allow them to, yes
2009-08-13T12:57:00.000Z	Gnea	llml	well if it's in sudo already, then it'll "just work" as another user
2009-08-13T12:58:00.000Z	llml	Gnea	if a file is touched by a sudo command, then its owner will root. i don't want it
2009-08-13T12:58:00.000Z	Gnea	llml	this is what chown is for
2009-08-13T12:59:00.000Z	llml	Gnea	thats just an example, the actual command is not touch, and produces a batch of files
2009-08-13T13:00:00.000Z	Gnea	llml	I understand. but if you're running the script as sudo already, then it's already privelaged, and thus you can just use simple commands within the script to achieve the goal you wish to accomplish
2009-08-13T13:00:00.000Z	Gnea	llml	that's why you just run the script itself via sudo, that way you only do the password once
2009-08-13T13:01:00.000Z	Gnea	llml	the only way to really do it the way you're thinking is with expect, and that is extremely insecure, since you'd have to store the password within the script itself
2009-08-13T13:03:00.000Z	Gnea	llml	well, you can either beat your knees with a baseball bat or you can swim with beautiful women, figuratively speaking
2009-08-13T13:08:00.000Z	llml	Gnea	lstarnes: one more question, sudo without -S provided is not reading its password from stdin, is it?
2009-08-13T13:08:00.000Z	Gnea	llml	sudo by itself reads from stdin
