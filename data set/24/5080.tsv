2007-01-25T16:42:00.000Z	pipak		hello, I have a problem with enabling DMA on my main harddisk... could someone please help me?
2007-01-25T16:42:00.000Z	LjL	pipak	explain the problem i guess
2007-01-25T16:44:00.000Z	pipak	LjL	" sudo hdparm -d1 /dev/hda" gives "HDIO_SET_DMA failed"
2007-01-25T16:44:00.000Z	LjL	pipak	and i suppose hdparm -i says it's not enabled already?
2007-01-25T16:47:00.000Z	pipak	LjL	from what hdparm tells me "using_dma    =  0 (off)". The system is horribly slow and jerky when using the disk
2007-01-25T16:48:00.000Z	LjL	pipak	motherboard and chipset?
2007-01-25T16:49:00.000Z	pipak	LjL	ICH3M on inspiron 8200
2007-01-25T16:52:00.000Z	LjL	pipak	hm i can see this guy with the same chipset http://lkml.org/lkml/2002/6/24/119 no solution that i can see though
2007-01-25T16:54:00.000Z	pipak	LjL	the weird thing is that it used to work when I had gentoo. But I'm afraid to fuck ubuntu up if I start messing up with the kernel configuration
2007-01-25T16:55:00.000Z	LjL	pipak	looking around in google, the only reason i can see for that error is a chipset not being compiled in the kernel. and that seems to be a possibility for ubuntu, seeing bug https://launchpad.net/ubuntu/+source/linux-source-2.6.15/+bug/39432
2007-01-25T16:57:00.000Z	pipak	LjL	would you know a good guide that explains how to recompile ubuntu's kernel and regenerate initrd?
2007-01-25T16:58:00.000Z	LjL	pipak	it's easy enough, though i'd follow the "old" approach described in that guide if it were me
2007-01-25T16:59:00.000Z	pipak	LjL	it was easy on gentoo, indeed :)
2007-01-25T16:59:00.000Z	LjL	pipak	see this bug also, https://launchpad.net/ubuntu/+source/linux-source-2.6.17/+bug/55929 since it's also about a similar issue and it includes a patch for the kernel config (it won't really be appropriate for you of course, but as reference)
2007-01-25T16:59:00.000Z	LjL	pipak	joke around as much as you like... it's easy on ubuntu too :)
2007-01-26T17:01:00.000Z	pipak	LjL	I'll give it a try
2007-01-26T17:03:00.000Z	LjL	pipak	do "sudo apt-get install build-essential linux-kernel-devel fakeroot kernel-wedge kernel-package" and then go straight to the "old fashioned way" paragraph, if you have problems ask
2007-01-26T06:40:00.000Z	pipak	LjL	it seems i might have the answer; generic-ide is loaded before piix module. Now my question is how does order of module loading work on ubuntu?
2007-01-26T06:43:00.000Z	LjL	pipak	hmm i don't quite know, but maybe you can blacklist the offending module and load it later - if using modprobe or insmod will override the blacklist, which i don't know
2007-01-26T06:57:00.000Z	pipak	LjL	that was the problem, removing ide-core, changing piix's position and update-initramfs did the trick
2007-01-26T06:57:00.000Z	LjL	pipak	cool but how did you change its position?
2007-01-26T06:59:00.000Z	pipak	LjL	looks like modules are loaded sequencially from the list /etc/initramfs-tools/modules
2007-01-26T06:59:00.000Z	LjL	pipak	good to know, thanks
2007-01-26T06:59:00.000Z	pipak	LjL	you're welcome, thanks for the help :)
