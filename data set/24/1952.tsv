2009-06-29T23:06:00.000Z	Jutman	mbeierl	I actually need the FORWARD to go eth1<->eth0 or it won't work
2009-06-29T23:07:00.000Z	mbeierl		Not uname?  uname -a: Linux mark-laptop 2.6.28-13-generic #44-Ubuntu SMP Tue Jun 2 07:55:09 UTC 2009 x86_64 GNU/Linux
2009-06-29T23:08:00.000Z	mbeierl	Jutman	lemme check again what I've got.  I'm using ufw (which helps keep things clean across reboots for me)...
2009-06-29T23:09:00.000Z	mbeierl	Jutman	I have no forward rule.  I masq all local (10.0.0.0) traffic coming in on eth1 to eth0 and that's all I need for masqing to work.  what stops working when you remove your forward rule?  all masquerading?
2009-06-29T23:10:00.000Z	Jutman	mbeierl	maybe its got something to do with l2tp, I'll have to play with it a bit more.
2009-06-29T23:10:00.000Z	mbeierl		oh
2009-06-29T23:10:00.000Z	mbeierl	Jutman	where's the l2tp server?
2009-06-29T23:10:00.000Z	Jutman		locally
2009-06-29T23:10:00.000Z	mbeierl	Jutman	is it the same server as the firewall?
2009-06-29T23:11:00.000Z	Jutman	mbeierl	yes
2009-06-29T23:11:00.000Z	Jutman	mbeierl	its all on the gateway
2009-06-29T23:11:00.000Z	mbeierl	Jutman	ok, then yes, it might be something like that - that the users using the vpn need somehow to get out?  but that should not affect the internal network
2009-06-29T23:12:00.000Z	Jutman	mbeierl	thats what I think is happening
2009-06-29T23:12:00.000Z	mbeierl	Jutman	so it's only the VPN users that have the problem?  Not the machines on the local network?
2009-06-29T23:12:00.000Z	Jutman		openvpn users can get onto it without that rule, but the l2tp users need that one
2009-06-29T23:12:00.000Z	Jutman	mbeierl	thats correct.
2009-06-29T23:13:00.000Z	mbeierl	Jutman	ah - I don't know enough about l2tp to be able to make a meaningful comment.  I was just thinking of the local network (the private one)
2009-06-29T23:13:00.000Z	Jutman	mbeierl	however, thats alright. I'll just leave the forward rule in, it still manages to pass through the INPUT/OUTPUT chains
2009-06-29T23:14:00.000Z	Jutman		thanks for all the help mbeierl
2009-06-29T23:14:00.000Z	mbeierl	Jutman	ok.  there should be a way to have the l2tp users use the vpn for private resources only, but use their own internet connection for anything in the outside world (split tunnel)
2009-06-29T23:14:00.000Z	Jutman	mbeierl	yes. I'll have to look into that.
2009-06-29T23:14:00.000Z	mbeierl	Jutman	ok - it /might/ be a client-side thing though
2009-06-29T23:14:00.000Z	Jutman	mbeierl	I do know a thing or two about using the route command, just not forwarding with iptables
2009-06-29T23:16:00.000Z	mbeierl	Jutman	what I mean is that each client might need to set up their own split tunnel, depending on the software that's used to make the l2tp connection...
