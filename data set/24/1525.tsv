2012-02-01T00:00:00.000Z	Sharcho		When I add "ufw allow from 173.194.69.99", the rule added in iptables is "ACCEPT     all  --  bk-in-f99.1e100.net  anywhere". Is there a way to prevent that from happening?
2012-02-01T00:00:00.000Z	ssta	Sharcho	umm, isn't that what you told it to do?
2012-02-01T00:01:00.000Z	ssta	Sharcho	no, it filters by IP, but it SHOWs you reverse DNS.  try: sudo iptables -L -n
2012-02-01T00:03:00.000Z	Sharcho	ssta	probably the latter.
2012-02-01T00:03:00.000Z	ssta	Sharcho	does iptables -L -n show what you expect?
2012-02-01T00:03:00.000Z	Sharcho	ssta	yes, it does.
2012-02-01T00:04:00.000Z	ssta	Sharcho	so what's the issue?
2012-02-01T00:04:00.000Z	Sharcho	ssta	I can only connect from IPs that have no reverse DNS on them.
2012-02-01T00:04:00.000Z	ssta	Sharcho	umm...iptables doesn't care about DNS except when it's listing the rules for you...
2012-02-01T00:05:00.000Z	ssta	Sharcho	perhaps start again...explain exactly what the problem is?
2012-02-01T00:06:00.000Z	Sharcho	ssta	when I allow a specific IP address, the allow works properly only if the IP doesn't have a reverse DNS on it.
2012-02-01T00:06:00.000Z	ssta	Sharcho	that makes no sense...iptables doesn't care about DNS, reverse or otherwise.
2012-02-01T00:07:00.000Z	Sharcho	ssta	maybe it modifies hosts.allow or something similar?
2012-02-01T00:08:00.000Z	Sharcho	ssta	the port isn't filtered, but I can't connect
2012-02-01T00:09:00.000Z	ssta	Sharcho	pastebin the output of "sudo iptables -L -v -n"
2012-02-01T00:11:00.000Z	Sharcho	ssta	http://pastebin.com/5LhSe23j
2012-02-01T00:15:00.000Z	ssta	Sharcho	packets from 173.194.69.99 should be accepted by that ruleset.
2012-02-01T00:21:00.000Z	Sharcho	ssta	it's really weird. It's causing "connection refused" issues on ports that are supposed to be open anyway.
2012-02-01T00:22:00.000Z	ssta	Sharcho	are those ports definitely listening to everwhere?
2012-02-01T00:22:00.000Z	ssta	Sharcho	I can't see anything in that ruleset that would cause anything to be dropped from that IP.  Of course ufw based rulesets are horrible spaghetti...
2012-02-01T00:23:00.000Z	Sharcho	ssta	sorry, that's another issue.
2012-02-01T00:31:00.000Z	Sharcho	ssta	okay I figured it out. The machine I was connecting from had several IP addresses, and it wasn't connecting through the primary adapter.
2012-02-01T00:32:00.000Z	Sharcho	ssta	so I only whitelisted one of the IPs.
2012-02-01T00:32:00.000Z	Sharcho	ssta	thanks for your help.
