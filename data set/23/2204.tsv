2009-05-28T05:39:00.000Z	jiho		Hi everyone. Wow plenty of people here, that's great! I have a tricky file permission issue and I hope someone here will be able to help.
2009-05-28T05:41:00.000Z	jiho		I have a machine with two hard drives. Number 1 has the system and home dirs, number 2 has data files that I want every user to be able to access. all users are in the same users group so basically I want every file written on 2 to be rw-rw-r-- (but the files on 1 to keep the current umask => rw-r--r--).
2009-05-28T05:42:00.000Z	jiho		oh and I should mention that the two drives are ext3 formatted (so umask in fstab is not a solution)
2009-05-28T05:42:00.000Z	usser	jiho	 just set gid on the second drive and set umask to 002
2009-05-28T05:43:00.000Z	usser	jiho	ie sudo chown youruser:users -R /mountpoint/seconddrive
2009-05-28T05:44:00.000Z	usser	jiho	err set sticky bit not gid
2009-05-28T05:44:00.000Z	jiho	usser	yeah that would work for a one time change, but any new files a user creats is rw-r--r-- again
2009-05-28T05:44:00.000Z	usser	jiho	not if you change umask to 002
2009-05-28T05:45:00.000Z	jiho	usser	but then 002 wil also be applicable on the user dirs, which I don't want
2009-05-28T05:45:00.000Z	usser	jiho	each user should have as its primary group his username, not their common 'users' group
2009-05-28T05:46:00.000Z	usser	jiho	ie my username is dcherniv my primary group is dcherniv, im also a member of MediaUsers
2009-05-28T05:46:00.000Z	usser	jiho	so each file i create is by default owned by dcherniv:dcherniv not dcherniv:MediaUsers
2009-05-28T05:46:00.000Z	jiho	usser	ok
2009-05-28T05:46:00.000Z	usser	jiho	if chown the directory to MediaUsers
2009-05-28T05:47:00.000Z	usser	jiho	chown -R dcherniv:MediaUsers /directory
2009-05-28T05:47:00.000Z	usser	jiho	and set g+s bit on it like so chmod g+s -R /directory
2009-05-28T05:48:00.000Z	usser	jiho	all newly created files will be owned by dcherniv:MediaUsers, sticky bit on gid essentiall overrides your primary group to whatever group owns the directory
2009-05-28T05:48:00.000Z	usser	jiho	try it
2009-05-28T05:49:00.000Z	jiho	usser	great, I read about the sticky bit but could not figure how to use it
2009-05-28T05:49:00.000Z	jiho	usser	OK, I'll try all that. I'll let you know the result in a few minutes
2009-05-28T05:50:00.000Z	usser	jiho	theres also default umask which in ubuntu is 022 which corresponds to permissions 755 ie all new files will get permissions 755, all for owner, read only for group, read only for others
2009-05-28T05:51:00.000Z	usser	jiho	theres a way to force a umask on a directory, but i forgot how to do that. google for it
2009-05-28T06:24:00.000Z	jiho	usser	thanks for the pointers. I am almost there. so I got to the point where: every user has his primary group set to his private group and is a member of "users"; /media/disk2 is owned by me:users and has permissions rwxrwsr-x; so the sticky bit is set for the group all all members can write in it (that works all files created there have group="users").
